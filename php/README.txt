# poipoi について

- クリエイター向けの画像・テキスト投稿アプリです
- 以下の機能があります:
  - 画像投稿
  - テキスト投稿
  - 投稿の公開範囲を設定（全体公開 / パスワード入力制 / 非公開）
  - 投稿のレーティングを設定（閲覧注意 / R-18）
  - 投稿の公開期間を設定
  - 投稿の検索避け設定
  - 投稿のピン留め（先頭に表示）
  - 投稿への絵文字によるリアクション追加（オンオフ設定可 / 絵文字設定可）
  - Twitterカード対応（オンオフ設定可）
  - RSS出力

## 注意事項

- さくらのレンタルサーバ（スタンダード）での動作を確認しています
- 以下の要件を満たすサーバでも動作可能と思われます
  - Laravel8を使用可能
    - https://readouble.com/laravel/8.x/ja/installation.html#server-requirements
  - SQLiteを使用可能
  - GDを使用可能
- 基本的にドメイン直下で動作することを想定しています
- 予めドキュメントルートを public ディレクトリに設定しておいてください
  - 例) さくらのレンタルサーバ
    - /www/poipoi 内にインストールする場合、「ドメイン設定」の「Web公開フォルダ」を ~/www/poipoi/public に設定する

## インストール手順（初回のみ）

1. ファイル .env.production.example を .env という名前でコピー
2. ファイル .env 内の設定 APP_URL を、設置先のURLに変更
3. ファイル .env 内の設定 SANCTUM_STATEFUL_DOMAINS を、設置先のドメインに変更
4. ディレクトリ database 内に database.sqlite という名前の空ファイルを作成
5. ディレクトリ poipoi 以下のファイルを全てサーバにアップロード
6. ディレクトリ storage 以下にある全てのディレクトリのパーミッションを書き込み可能に設定
   ※ 書き込み可能なパーミッションは、サーバによって異なります。大抵は 777 ですが、正確な情報はサーバの設定をご確認ください
7. ファイル database/database.sqlite のパーミッションを書き込み可能に設定
   ※ 書き込み可能なパーミッションは、サーバによって異なります。大抵は 666 ですが、正確な情報はサーバの設定をご確認ください
8. （設置したURL）/install.php にアクセス

## バージョンアップ手順

最新の poipoi.zip を解凍し、中のファイルを全てサーバに上書きアップロードして下さい。
※ 念の為、「データ保存場所」の項目を参考の上で事前にバックアップを取ることをお勧めいたします。

## データ保存場所

サイトのデータは以下の場所に保存してあります。バックアップやサーバ移転の際はこれらのデータを手元にDLして下さい。

投稿データおよび設定データ: database/database.sqlite
画像ファイル: storage/public/images 以下
